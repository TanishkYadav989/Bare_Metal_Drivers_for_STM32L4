This driver is a combination of External Interrupt & USART_2. When a button initialised using External Interrupt, after being pressed it initiates a transmission of data to My PC via UART.
This UART driver is an interrupt driven driver unlike the last one which was based on polling & follows the same initialisation procedure including setting of RXNE interrupt enable bit & disabling of TXE interrupt enable bit in the Control Register 1.
Some newer functions are also initialised for Storing, Sending & Receiving of data including the Interrupt Handler;
1. Receive Function -> This function looks for the Receive data register not empty flag & reads the received data into Read Data Register, a counter increments for proper array positioning & initialises a Circular Buffer to prevent buffer overflow.
2. UART_msg Function -> This function reads data provided into a globally defined array named usart_buffer. Sets the TXEIE bit in CR1 and initialises the counter to 0 for safe reading into the array. After this the usart_buffer reads data into TDR from array index 0.
3. Send Function -> This function looks for the Transmission data register empty flag & assignes data to TDR which automatically clears the flag followed by incrementing of counter. If the buffer is empty it sets the counter to 0 again & disables the TXEIE bit.
4. USART2_IRQHandler -> The acts as a Central Traffic Controller for both sending & receiving data by looking for the RXNE & TXE flag in the Interrupt Status register. If any one of the those flag is set, it executes the corresponding function logic automatically. I also added a toggle led function along the Send protocol which results in the LED being turned off during transmission (Also acts as a visual diagnostic for the interrupt activity).
